<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  
    
      
    

    
  

  

  

  
    
      
    

    
  

  
    
    
    <link href="https://fonts.cat.net/css?family=Lato:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Roboto Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="读,JavaScript," />










<meta name="description" content="[美]   Nicholas  C.Zakes    著   李松峰   曹力  译  （第三版） 第十章DOM 第十一章DOM扩展">
<meta name="keywords" content="读,JavaScript">
<meta property="og:type" content="article">
<meta property="og:title" content="读《JavaScript高级程序设计》（4）">
<meta property="og:url" content="https://shigithup.github.io/note/2018/undefined26/be32fa2a.html">
<meta property="og:site_name" content="迷途小书童">
<meta property="og:description" content="[美]   Nicholas  C.Zakes    著   李松峰   曹力  译  （第三版） 第十章DOM 第十一章DOM扩展">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://www.w3school.com.cn/i/ct_htmltree.gif">
<meta property="og:image" content="http://www.w3school.com.cn/i/dom_navigate.gif">
<meta property="og:image" content="http://myphoto.shigaozhen.cn/myselfhexo/20180526/175048085.jpg">
<meta property="og:image" content="http://myphoto.shigaozhen.cn/myselfhexo/20180530/101425991.jpg">
<meta property="og:image" content="http://myphoto.shigaozhen.cn/myselfhexo/20180530/101036624.jpg">
<meta property="og:image" content="http://myphoto.shigaozhen.cn/myselfhexo/20180530/111139590.jpg">
<meta property="og:updated_time" content="2018-05-30T06:37:13.150Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="读《JavaScript高级程序设计》（4）">
<meta name="twitter:description" content="[美]   Nicholas  C.Zakes    著   李松峰   曹力  译  （第三版） 第十章DOM 第十一章DOM扩展">
<meta name="twitter:image" content="http://www.w3school.com.cn/i/ct_htmltree.gif">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"right","display":"post","offset":12,"b2t":false,"scrollpercent":"ture","onmobile":"ture"},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://shigithup.github.io/note/2018/undefined26/be32fa2a.html"/>





  <title>读《JavaScript高级程序设计》（4） | 迷途小书童</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-right page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><meta name="google-site-verification" content="a33qFOFK35xetcET7qBnQHDDB3VkD8mOMd8uwvF6A28" />

<div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">迷途小书童</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">史高震的世界碎片</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://shigithup.github.io/note/2018/undefined26/be32fa2a.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="3039535188@qq.com">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="迷途小书童">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">读《JavaScript高级程序设计》（4）</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-26T08:07:30+08:00">
                2018-05-26
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2018-05-30T14:37:13+08:00">
                2018-05-30
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/前端/" itemprop="url" rel="index">
                    <span itemprop="name">前端</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/note/2018/undefined26/be32fa2a.html" class="leancloud_visitors" data-flag-title="读《JavaScript高级程序设计》（4）">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <blockquote>
<p>[美]   Nicholas  C.Zakes    著   李松峰   曹力  译  （第三版）</p>
<p>第十章DOM</p>
<p>第十一章DOM扩展</p>
</blockquote>
<a id="more"></a>
<p>可参考<a href="https://zhuanlan.zhihu.com/p/25703872" target="_blank" rel="noopener">JavaScript中的DOM对象</a>，写的很好。本文写的匆忙，自己看的。O(∩_∩)O哈哈~</p>
<p>由于书上写的好啰嗦，受不鸟了。所以决定先从,<a href="http://www.w3school.com.cn/htmldom/index.asp" target="_blank" rel="noopener">w3cshool</a>了解些基础，以后在深挖。</p>
<p>“W3C 文档对象模型 （DOM） 是中立于平台和语言的接口，它允许程序和脚本动态地访问和更新文档的内容、结构和样式。</p>
<p>当网页被加载时，浏览器会创建页面的文档对象模型（Document Object Model）。</p>
<p>HTML DOM 模型被构造为对象的树。</p>
<p><strong>HTML DOM 树</strong></p>
<p><img src="http://www.w3school.com.cn/i/ct_htmltree.gif" alt="DOM HTML æ "> </p>
<h1 id="1-DOM-节点"><a href="#1-DOM-节点" class="headerlink" title="1.DOM 节点"></a>1.DOM 节点</h1><p>根据 W3C 的 HTML DOM 标准，HTML 文档中的所有内容都是节点：</p>
<ul>
<li>整个文档是一个文档节点</li>
<li>每个 HTML 元素是元素节点</li>
<li>HTML 元素内的文本是文本节点</li>
<li>每个 HTML 属性是属性节点</li>
<li>注释是注释节点</li>
</ul>
<p>节点树中的节点彼此拥有层级关系。</p>
<p>父（parent）、子（child）和同胞（sibling）等术语用于描述这些关系。</p>
<p><img src="http://www.w3school.com.cn/i/dom_navigate.gif" alt="DOM èç¹å³ç³»"> </p>
<h1 id="2-DOM-方法和属性"><a href="#2-DOM-方法和属性" class="headerlink" title="2.DOM 方法和属性"></a>2.DOM 方法和属性</h1><p>方法是我们可以在节点（HTML 元素）上执行的动作。</p>
<p>可通过 JavaScript （以及其他编程语言）对 HTML DOM 进行访问。</p>
<p>所有 HTML 元素被定义为对象，而编程接口则是对象方法和对象属性。</p>
<p>方法是您能够执行的动作（比如添加或修改元素）。</p>
<p>属性是您能够获取或设置的值（比如节点的名称或内容）.</p>
<p>一些常用的 HTML DOM 属性：</p>
<ul>
<li>innerHTML - 节点（元素）的文本值</li>
<li>parentNode - 节点（元素）的父节点</li>
<li>childNodes - 节点（元素）的子节点</li>
<li>attributes - 节点（元素）的属性节点</li>
</ul>
<h1 id="nodeName-属性"><a href="#nodeName-属性" class="headerlink" title="nodeName 属性"></a>nodeName 属性</h1><p>nodeName 属性规定节点的名称。</p>
<ul>
<li>nodeName 是只读的</li>
<li>元素节点的 nodeName 与标签名相同</li>
<li>属性节点的 nodeName 与属性名相同</li>
<li>文本节点的 nodeName 始终是 #text</li>
<li>文档节点的 nodeName 始终是 #document</li>
</ul>
<h2 id="nodeValue-属性"><a href="#nodeValue-属性" class="headerlink" title="nodeValue 属性"></a>nodeValue 属性</h2><p>nodeValue 属性规定节点的值。</p>
<ul>
<li>元素节点的 nodeValue 是 undefined 或 null</li>
<li>文本节点的 nodeValue 是文本本身</li>
<li>属性节点的 nodeValue 是属性值</li>
</ul>
<h2 id="nodeType-属性"><a href="#nodeType-属性" class="headerlink" title="nodeType 属性"></a>nodeType 属性</h2><p>nodeType 属性返回节点的类型。nodeType 是只读的。</p>
<p>比较重要的节点类型有：</p>
<table>
<thead>
<tr>
<th>元素类型</th>
<th>NodeType</th>
</tr>
</thead>
<tbody>
<tr>
<td>元素</td>
<td>1</td>
</tr>
<tr>
<td>属性</td>
<td>2</td>
</tr>
<tr>
<td>文本</td>
<td>3</td>
</tr>
<tr>
<td>注释</td>
<td>8</td>
</tr>
<tr>
<td>文档</td>
<td>9</td>
</tr>
</tbody>
</table>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"intro"</span>&gt;</span>Hello World!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> txt=<span class="built_in">document</span>.getElementById(<span class="string">"intro"</span>);  <span class="comment">//得到一个元素节点 [object HTMLParagraphElement]</span></span></span><br><span class="line"><span class="javascript"><span class="built_in">document</span>.write(txt);<span class="comment">// [object HTMLParagraphElement]</span></span></span><br><span class="line"><span class="javascript"><span class="built_in">document</span>.write(txt.innerHTML);<span class="comment">//Hello World  innerHTMl得到这个元素的文本值</span></span></span><br><span class="line"><span class="javascript"><span class="built_in">document</span>.write(txt.nodeName);<span class="comment">//p  元素节点的标签名</span></span></span><br><span class="line"><span class="javascript"><span class="built_in">document</span>.write(txt.firstChild); <span class="comment">//得到元素p的文本节点[object Text]</span></span></span><br><span class="line"><span class="javascript"><span class="built_in">document</span>.write(txt.nodeValue);<span class="comment">// null </span></span></span><br><span class="line"><span class="javascript"><span class="built_in">document</span>.write(txt.firstchild.nodeValue);<span class="comment">//   Hello World </span></span></span><br><span class="line"><span class="javascript"><span class="built_in">document</span>.write(txt.nodeType); <span class="comment">//1</span></span></span><br><span class="line"><span class="undefined">    </span></span><br><span class="line"><span class="undefined">   </span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>现实生活中的对象</strong></p>
<p>某个人是一个对象。</p>
<p>人的方法可能是 eat(), sleep(), work(), play() 等等。</p>
<p>所有人都有这些方法，但会在不同时间执行它们。</p>
<p>一个人的属性包括姓名、身高、体重、年龄、性别等等。</p>
<p>所有人都有这些属性，但它们的值因人而异。</p>
<h2 id="DOM-对象方法"><a href="#DOM-对象方法" class="headerlink" title="DOM 对象方法"></a>DOM 对象方法</h2><table>
<thead>
<tr>
<th>方法</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>document .getElementById()</td>
<td>返回带有指定 ID 的元素。</td>
</tr>
<tr>
<td>getElementsByTagName()</td>
<td>返回包含带有指定标签名称的所有元素的节点列表（集合/节点数组nodelist(由于浏览器内核解析不一样)）。</td>
</tr>
<tr>
<td>getElementsByClassName()</td>
<td>返回包含带有指定类名的所有元素的节点列表。</td>
</tr>
<tr>
<td>A .appendChild(B)</td>
<td>把新的<strong>子节点</strong>添加到指定节点。B 为新建节点，A为已有节点。追加到A后面。 将新元素作为父元素的最后一个子元素进行添加。</td>
</tr>
<tr>
<td>removeChild()</td>
<td>删除子节点。</td>
</tr>
<tr>
<td>replaceChild(A,B)</td>
<td>替换子节点。A是替换，B是被替换</td>
</tr>
<tr>
<td>insertBefore()</td>
<td>在指定的子节点前面插入新的子节点。</td>
</tr>
<tr>
<td>createAttribute()</td>
<td>创建属性节点。</td>
</tr>
<tr>
<td>document .createElement(‘p’)</td>
<td>创建元素节点p。</td>
</tr>
<tr>
<td>createTextNode(‘我想做个好人’)</td>
<td>创建文本节点。我想做个好人</td>
</tr>
<tr>
<td>getAttribute()</td>
<td>返回指定的属性值。</td>
</tr>
<tr>
<td>setAttribute()</td>
<td>把指定属性设置或修改为指定的值。</td>
</tr>
</tbody>
</table>
<p>getElementsByTagName() 开始于一个具体的父级元素并且从它自上而下递归地在DOM树中搜索符合标签名称参数的子元素。</p>
<p><strong>注意调用 getElementsByTagName() 的不是那个文件节点 document，事实上是使用这个方法 element.getElementsByTagName()。</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> div1 = <span class="built_in">document</span>.getElementById(<span class="string">"div1"</span>);</span><br><span class="line"><span class="keyword">var</span> div1Paras = div1.getElementsByTagName(<span class="string">"p"</span>);<span class="comment">//div1中的p</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.getElementsByTagName(<span class="string">"p"</span>);<span class="comment">// 获得整个文件中的p。</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Hello World!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"main"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">'p1'</span>&gt;</span>DOM 很有用！<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">'p2'</span>&gt;</span>本例演示 <span class="tag">&lt;<span class="name">b</span>&gt;</span>getElementsByTagName<span class="tag">&lt;/<span class="name">b</span>&gt;</span> 方法。<span class="tag">&lt;/<span class="name">p</span>&gt;</span> //返回的是一个同名数组</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">x=<span class="built_in">document</span>.getElementById(<span class="string">"main"</span>).getElementsByTagName(<span class="string">"p"</span>);</span></span><br><span class="line"><span class="javascript"><span class="built_in">document</span>.write( x);<span class="comment">//[object HTMLCollection]</span></span></span><br><span class="line"><span class="javascript"><span class="built_in">document</span>.write(x[<span class="number">0</span>]);<span class="comment">//[object HTMLParagraphElement]</span></span></span><br><span class="line"><span class="javascript"><span class="built_in">document</span>.write(x[<span class="number">0</span>].innertHTML );<span class="comment">//    DOM 很有用！</span></span></span><br><span class="line"><span class="javascript"><span class="built_in">document</span>.write(<span class="string">"div 中的第一段的文本: "</span> + x[<span class="number">0</span>].innerHTML);</span></span><br><span class="line"><span class="undefined">    </span></span><br><span class="line"><span class="undefined">    </span></span><br><span class="line"><span class="javascript">x[<span class="number">0</span>].innertHTML =<span class="string">'New Text'</span><span class="comment">//改变 HTML 内容</span></span></span><br><span class="line"><span class="javascript"><span class="built_in">document</span>.write(x[<span class="number">0</span>].innertHTML );<span class="comment">// New Text</span></span></span><br><span class="line"><span class="javascript">x[<span class="number">0</span>].style.color =<span class="string">'blue'</span>  <span class="comment">//改变样式</span></span></span><br><span class="line"><span class="javascript">x[<span class="number">0</span>].style.fontSize=<span class="string">'larger '</span></span></span><br><span class="line"><span class="undefined">    </span></span><br><span class="line"><span class="javascript"><span class="comment">//创建一个新元素</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> para=<span class="built_in">document</span>.createElement(<span class="string">"p"</span>);<span class="comment">//创建元素节点</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> node=<span class="built_in">document</span>.createTextNode(<span class="string">"This is new."</span>);<span class="comment">//创建文本节点</span></span></span><br><span class="line"><span class="javascript">para.appendChild(node);<span class="comment">//把文本节点与元素节点连接</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> element=<span class="built_in">document</span>.getElementById(<span class="string">"main"</span>); </span></span><br><span class="line"><span class="javascript">element.appendChild(para);<span class="comment">//追加到已有元素上作为子节点</span></span></span><br><span class="line"><span class="undefined">    </span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> child=<span class="built_in">document</span>.getElementById(<span class="string">"p1"</span>);</span></span><br><span class="line"><span class="javascript">element.insertBefore(para,child);<span class="comment">//插入到指定子节点前    </span></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>能否在不引用父元素的情况下删除某个元素？</p>
<p>很抱歉。DOM 需要了解您需要删除的元素，以及它的父元素。</p>
<p>这里提供一个常用的解决方法：找到您需要删除的子元素，然后使用 parentNode 属性来查找其父元素：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> child=<span class="built_in">document</span>.getElementById(<span class="string">"p1"</span>);</span><br><span class="line">child.parentNode.removeChild(child);</span><br></pre></td></tr></table></figure>
<p><strong>替换某个元素</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div1"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"p1"</span>&gt;</span>This is a paragraph.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"p2"</span>&gt;</span>This is another paragraph.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> para=<span class="built_in">document</span>.createElement(<span class="string">"p"</span>);</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> node=<span class="built_in">document</span>.createTextNode(<span class="string">"This is new."</span>);</span></span><br><span class="line"><span class="undefined">para.appendChild(node);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> parent=<span class="built_in">document</span>.getElementById(<span class="string">"div1"</span>);</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> child=<span class="built_in">document</span>.getElementById(<span class="string">"p1"</span>);</span></span><br><span class="line"><span class="undefined">parent.replaceChild(para,child);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="修改-HTML-元素"><a href="#修改-HTML-元素" class="headerlink" title="修改 HTML 元素"></a>修改 HTML 元素</h2><p>修改 HTML DOM 意味着许多不同的方面：</p>
<ul>
<li>改变 HTML 内容</li>
<li>改变 CSS 样式</li>
<li>改变 HTML 属性</li>
<li>创建新的 HTML 元素</li>
<li>删除已有的 HTML 元素</li>
<li>改变事件（处理程序）</li>
</ul>
<p>改变元素内容的最简答的方法是使用 innerHTML 属性。 </p>
<p>如需向 HTML DOM 添加新元素，您首先必须创建该元素（元素节点），然后把它追加到已有的元素上。 </p>
<p>下面两个例子在按钮被点击时改变 <body> 元素的背景色：</body></p>
<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">onclick</span>=<span class="string">"document.body.style.backgroundColor='lavender';"</span></span></span><br><span class="line"><span class="tag"><span class="attr">value</span>=<span class="string">"Change background color"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><a href="http://www.w3school.com.cn/tiy/t.asp?f=dom_changebackground" target="_blank" rel="noopener">亲自试一试</a></p>
<p>在本例中，由函数执行相同的代码：</p>
<h3 id="实例-1"><a href="#实例-1" class="headerlink" title="实例"></a>实例</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="function"><span class="keyword">function</span> <span class="title">ChangeBackground</span>(<span class="params"></span>)</span></span></span><br><span class="line"><span class="undefined">&#123;</span></span><br><span class="line"><span class="javascript"><span class="built_in">document</span>.body.style.backgroundColor=<span class="string">"lavender"</span>;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">onclick</span>=<span class="string">"ChangeBackground()"</span></span></span><br><span class="line"><span class="tag"><span class="attr">value</span>=<span class="string">"Change background color"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>事件发生时，可以执行 JavaScript，比如当用户点击一个 HTML 元素时。</p>
<p>如需在用户点击某个元素时执行代码，请把 JavaScript 代码添加到 HTML 事件属性中：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">onclick=JavaScript</span><br></pre></td></tr></table></figure>
<p>在本例中，当用户点击时，会改变 <code>&lt;h1&gt;</code> 元素的内容：</p>
<h3 id="实例-2"><a href="#实例-2" class="headerlink" title="实例"></a>实例</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">onclick</span>=<span class="string">"this.innerHTML='hello!'"</span>&gt;</span>请点击这段文本!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在本例中，会从事件处理程序中调用函数：</p>
<h3 id="实例-3"><a href="#实例-3" class="headerlink" title="实例"></a>实例</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">changetext</span>(<span class="params">id</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">id.innerHTML=<span class="string">"hello!"</span>;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1 onclick=<span class="string">"changetext(this)"</span>&gt;请点击这段文本!<span class="xml"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&lt;<span class="regexp">/body&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>html&gt;</span><br></pre></td></tr></table></figure>
<h2 id="导航节点关系"><a href="#导航节点关系" class="headerlink" title="导航节点关系"></a>导航节点关系</h2><p>您能够使用三个节点属性：parentNode、firstChild 以及 lastChild ，在文档结构中进行导航。</p>
<h2 id="DOM-根节点"><a href="#DOM-根节点" class="headerlink" title="DOM 根节点"></a>DOM 根节点</h2><p>这里有两个特殊的属性，可以访问全部文档：</p>
<ul>
<li>document.documentElement - 全部文档</li>
<li>document.body - 文档的主体</li>
</ul>
<h2 id="childNodes-和-nodeValue"><a href="#childNodes-和-nodeValue" class="headerlink" title="childNodes 和 nodeValue"></a>childNodes 和 nodeValue</h2><p>除了 innerHTML 属性，您也可以使用 childNodes 和 nodeValue 属性来获取元素的内容。</p>
<p> childNodes [0]相当于firstChild.</p>
<p>下面的代码获取 id=”intro” 的 </p><p> 元素的值：</p>
<h3 id="实例-4"><a href="#实例-4" class="headerlink" title="实例"></a>实例</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"intro"</span>&gt;</span>Hello World!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> txt=<span class="built_in">document</span>.getElementById(<span class="string">"intro"</span>).childNodes[<span class="number">0</span>].nodeValue;</span></span><br><span class="line"><span class="javascript"><span class="built_in">document</span>.write(txt);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p>firstChild returns the first child node</p>
</li>
<li><p>childNodes returns a collection of all child nodes</p>
<blockquote>
<p>它返回指定元素的子元素集合，包括html节点，所有属性，文本。如果代码中有换行、空格就会增加文本节点，这样用它来返回真正的子节点就会不准确 .</p>
<p>每一个节点都有一个childNodes属性，其中保存着一个NodeList对象。NodeList是一种类数组对象，但不是数组，用于保存一组有序的节点。可以通过<code>someNode.childNodes[0]</code>and<code>someNode.childNodes.item(0)</code>来访问。</p>
</blockquote>
</li>
<li><p>firstElementChild returns the first child element</p>
</li>
<li>children returns a collection of all child elements</li>
</ul>
<h2 id="childNodes属性"><a href="#childNodes属性" class="headerlink" title="childNodes属性:"></a>childNodes属性:</h2><p>标准的，它返回指定元素的子元素集合，包括html节点，所有属性，文本。如果代码中有换行、空格就会增加文本节点，这样用它来返回真正的子节点就会不准确 .</p>
<p>每一个节点都有一个childNodes属性，其中保存着一个NodeList对象。NodeList是一种类数组对象，但不是数组，用于保存一组有序的节点。可以通过<code>someNode.childNodes[0]</code>and<code>someNode.childNodes.item(0)</code>来访问。</p>
<h2 id="children属性"><a href="#children属性" class="headerlink" title="children属性:"></a>children属性:</h2><p>非标准的，它返回指定元素的子元素集合。经测试，它只返回html节点，甚至不返回文本节点。</p>
<p><strong>difference</strong></p>
<p><a href="http://www.w3.org/TR/domcore/#dom-element-children" target="_blank" rel="noopener"><code>.children</code></a> is a property of an <a href="http://www.w3.org/TR/domcore/#element" target="_blank" rel="noopener">Element</a>. Only Elements have children, and these children are all of type Element.</p>
<p>However <a href="http://www.w3.org/TR/domcore/#dom-node-childnodes" target="_blank" rel="noopener"><code>.childNodes</code></a> is a property of <a href="http://www.w3.org/TR/domcore/#node" target="_blank" rel="noopener">Node</a>. <code>.childNodes</code> can contain any node.</p>
<p>So a concrete example would be</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> el = <span class="built_in">document</span>.createElement(<span class="string">"div"</span>);</span><br><span class="line">el.textContent = <span class="string">"foo"</span></span><br><span class="line">el.childNodes.length === <span class="number">1</span>; <span class="comment">// TextNode is a node child</span></span><br><span class="line">el.children.length === <span class="number">0</span>; <span class="comment">// no Element children</span></span><br></pre></td></tr></table></figure>
<h2 id="firstChild属性："><a href="#firstChild属性：" class="headerlink" title="firstChild属性："></a>firstChild属性：</h2><p>获取指定元素的第一个子节点，可以是元素节点，也可以是文本节点。</p>
<p>问题：若父元素与第一个子元素之间存在空白节点，firstChild获取到的将是空白节点而不是第一个子元素。</p>
<p>解决：使用firstElementChild属性。</p>
<p>问题：IE6/7/8中不支持firstElementChild属性。</p>
<p>解决：使用children[0]属性。</p>
<p>firstElementChild属性：</p>
<p>获取指定元素的第一个子元素节点，不会检测到文本节点。</p>
<p>对于<strong>元素间的空格</strong>，IE9及以前版本不会返回文本节点，而其他所有浏览器都会<strong>返回文本节点</strong>。这样导致了在使用childNodes和firstChild等属性时的行为不一致。</p>
<blockquote>
<p>=&gt;childNodes</p>
<p>=&gt;firstChild</p>
<p>=&gt;lastChild</p>
<p>=&gt;nextSibling（）</p>
<p>=&gt;previousSibling（）</p>
</blockquote>
<p>为了弥补上述这一差异，而同时又保持DOM规范不变，Element Traversal规范新定义了一组属性。（即）</p>
<blockquote>
<p>=&gt;childElementCount：返回子元素（不包括文本节点和注释）的个数</p>
<p>=&gt;firstElementChild：指向第一个子元素；firstChild的元素版。</p>
<p>=&gt;lastElementChild：指向最后    一个子元素；lastChild的元素版。</p>
<p>=&gt;previousElementSibling：指向前一个同辈元素；previousSibling的元素版。</p>
<p>=&gt;nextElementSibling：指向最后一个同辈元素；nextSibling的元素版。</p>
</blockquote>
<p> 对于arguments对象使用Array.prototype.slice（）方法可以将其转为数组，也可将NodeList转化.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"source"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>北京空气质量：<span class="tag">&lt;<span class="name">b</span>&gt;</span>90<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>上海空气质量：<span class="tag">&lt;<span class="name">b</span>&gt;</span>70<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>天津空气质量：<span class="tag">&lt;<span class="name">b</span>&gt;</span>80<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>广州空气质量：<span class="tag">&lt;<span class="name">b</span>&gt;</span>50<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>深圳空气质量：<span class="tag">&lt;<span class="name">b</span>&gt;</span>40<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>福州空气质量：<span class="tag">&lt;<span class="name">b</span>&gt;</span>32<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>成都空气质量：<span class="tag">&lt;<span class="name">b</span>&gt;</span>90<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> all = <span class="built_in">document</span>.getElementById(<span class="string">"source"</span>).childNodes.length;</span></span><br><span class="line"><span class="javascript"><span class="built_in">document</span>.write(all); <span class="comment">//15</span></span></span><br><span class="line"><span class="javascript"><span class="comment">//把childNodes换为children    all 为7  多多调试下</span></span></span><br><span class="line"><span class="undefined">    </span></span><br><span class="line"><span class="undefined">    </span></span><br><span class="line"><span class="javascript"><span class="comment">//无聊玩  对于arguments对象使用Array.prototype.slice（）方法可以将其转为数组，也可将NodeList转化</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> all = <span class="built_in">document</span>.getElementById(<span class="string">"source"</span>).childNodes;</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> arrAll = <span class="built_in">Array</span>.prototype.slice.call(all,<span class="number">0</span>);</span></span><br><span class="line"><span class="javascript">alert(arrAll <span class="keyword">instanceof</span> <span class="built_in">Array</span>   );</span></span><br><span class="line"><span class="javascript"><span class="built_in">document</span>.write(arrAll);</span></span><br><span class="line"><span class="javascript"><span class="comment">//[object Text],[object HTMLLIElement],[object HTMLLIElement],[object Text],[object HTMLLIElement],[object Text],[object HTMLLIElement],[object Text],[object HTMLLIElement],[object Text],[object HTMLLIElement],[object Text],[object HTMLLIElement],[object Text]</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    </span></span><br><span class="line"><span class="javascript"> <span class="comment">//移除第一个li（北京质量）</span></span></span><br><span class="line"><span class="javascript"><span class="function"><span class="keyword">function</span> <span class="title">myFunction</span>(<span class="params"></span>)</span></span></span><br><span class="line"><span class="undefined">&#123;</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> list=<span class="built_in">document</span>.getElementById(<span class="string">"source"</span>);</span></span><br><span class="line"><span class="javascript">list.removeChild(list.childNodes[<span class="number">0</span>]);  <span class="comment">//就为了这一句</span></span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="innerText-outerText-innerHTML-outerHTML"><a href="#innerText-outerText-innerHTML-outerHTML" class="headerlink" title="innerText/outerText,innerHTML/outerHTML"></a>innerText/outerText,innerHTML/outerHTML</h2><p> 某元素的<strong>innerText</strong>指的是由其元素的开始标签和结束标签所包含的那一段HTML代码被去除格式后的纯文本。</p>
<p>   <strong>outerText</strong>与其不同的是它包含元素的开始和结束标签。</p>
<p> <img src="http://myphoto.shigaozhen.cn/myselfhexo/20180526/175048085.jpg" alt="mark"></p>
<p>  上述四个属性不仅可以读取，还可以赋值。outerText和innerText的区别在于outerText赋值时会把标签一起赋值掉</p>
<p>Unlike innerText, though, innerHTML lets you work with HTML rich text and doesn’t automatically encode and decode text. In other words, innerText retrieves and sets the content of the tag as plain text, whereas innerHTML retrieves and sets the content in HTML format.   即innerHTML保留html标签</p>
<h3 id="element-innerHTML"><a href="#element-innerHTML" class="headerlink" title="element.innerHTML"></a><code>element.innerHTML</code></h3><h3 id="node-innerText"><a href="#node-innerText" class="headerlink" title="node.innerText"></a><code>node.innerText</code></h3><p>value 属性设置或返回 textarea 的文本 （value是表单元素特有的属性,输入输出的是转义文本 ）。</p>
<p> <strong>通过CSS选择器选取元素</strong></p>
<p>Document对象的方法querySelectorAll()，它接受一个CSS选择器的字符串参数，返回一个代表文档中匹配选择器的所有元素的NodeList对象，并不是实时的。如果没有匹配的元素，则返回一个空的NodeList对象。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">document.querySelectorAll(&apos;.div&apos;)  //匹配所有class名为div的元素</span><br></pre></td></tr></table></figure>
<p>还有一个querySelector()方法，其原理和querySelectorAll()是一样的，不过它返回第一个匹配的元素（以文档顺序），如果没有匹配的元素就返回null。</p>
<p>它们支持复杂的CSS选择器。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 选中data-tip属性等于title的元素  </span><br><span class="line">document.querySelectorAll(&apos;[data-tip=&quot;title&quot;]&apos;);</span><br><span class="line"></span><br><span class="line">// 选中div元素，那些class含ignore的除外  </span><br><span class="line">document.querySelectorAll(&apos;div:not(.ignore)&apos;);</span><br></pre></td></tr></table></figure>
<p>但是，它们不支持CSS伪元素的选择器（比如:first-line和:first-letter）和伪类的选择器（比如:link和:visited），即无法选中伪元素和伪类。</p>
<p>这两个方法在Element节点上也有定义</p>
<h1 id="3-HTML-DOM-实例"><a href="#3-HTML-DOM-实例" class="headerlink" title="3.HTML DOM 实例"></a>3.HTML DOM 实例</h1><h2 id="Document-对象"><a href="#Document-对象" class="headerlink" title="Document 对象"></a>Document 对象</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="built_in">document</span>.write(<span class="string">"Hello World!"</span>)；</span></span><br><span class="line"><span class="javascript"><span class="built_in">document</span>.write(<span class="string">"&lt;h1&gt;Hello World!&lt;/h1&gt;"</span>)；<span class="comment">// 可写HTML</span></span></span><br><span class="line"><span class="javascript"><span class="built_in">document</span>.write(<span class="built_in">document</span>.title)；</span></span><br><span class="line"><span class="javascript"><span class="built_in">document</span>.write(<span class="built_in">document</span>.URL);</span></span><br><span class="line"><span class="javascript"><span class="built_in">document</span>.write(<span class="built_in">document</span>.referrer);<span class="comment">//referrer 属性返回加载本文档的文档的</span></span></span><br><span class="line"><span class="javascript"> <span class="built_in">document</span>.write(<span class="built_in">document</span>.domain); <span class="comment">//返回域名</span></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="4-事件"><a href="#4-事件" class="headerlink" title="4.事件"></a>4.事件</h1><p><a href="https://juejin.im/post/584414b5128fe1006c4cbfa9" target="_blank" rel="noopener">更多细节请参考《JavaScript 闯关记》之事件</a></p>
<p> JS与HTML之间的交互是通过事件实现的。事件，就是文档或浏览器窗口中发生的一些特定的交互瞬间。可以使用<strong>侦听器</strong>(或处理程序)来预定事件，以便事件发生时执行相应的代码。事件就是 Web 浏览器通知应用程序发生了什么事情，支持页面行为(javascript)与页面的外观（html css）之间的松耦合 ，这种在传统软件工程中被称为观察员模式。</p>
<p>观察者模式又叫做发布订阅者模式(Publish/Subscribe)，它可以让多个观察者对象同时监听某一个主题对象，这个主题对象的状态变化时会通知所有的订阅者，使得它们能够做出反应。<br>JS的事件模型就是一种观察者模式的体现，当对应的事件被触发时，监听该事件的所有监听函数都会被调用。</p>
<p><strong>事件通常与函数配合使用，这样就可以通过发生的事件来驱动函数执行。</strong></p>
<h2 id="4-1概念："><a href="#4-1概念：" class="headerlink" title="4.1概念："></a>4.1<strong>概念：</strong></h2><ul>
<li><strong>事件event）</strong>：是指用户或者浏览器自身执行的某种动作。如：click、load和mouseover。</li>
<li><strong>事件类型（event type）：</strong>用来说明发生什么类型事件的字符串，有时候，称为事件名称（event name），如：’mousemove’，’keydown’，’load’</li>
<li><strong>事件目标（event target）：</strong>发生的事件与之相关的对象。</li>
<li><strong>事件处理程序（event handle/listener）</strong>：处理或者响应事件的函数。</li>
<li><strong>事件对象（event object）</strong>：与特定事件相关且包含有关事件详细信息的对象，事件对象作为参数传递给事件处理程序函数（IE8除外，仅能通过window.event得到）。</li>
</ul>
<h2 id="4-2事件流"><a href="#4-2事件流" class="headerlink" title="4.2事件流"></a>4.2事件流</h2><p>首先在介绍DOM事件之前我们先来认识下DOM的不同级别。针对不同级别的DOM，我们的DOM事件处理方式也是不一样的。</p>
<h3 id="4-2-1DOM级别与DOM事件"><a href="#4-2-1DOM级别与DOM事件" class="headerlink" title="4.2.1DOM级别与DOM事件"></a>4.2.1DOM级别与DOM事件</h3><p><a href="https://www.jianshu.com/p/3c2e465480be" target="_blank" rel="noopener">转自简书DOM 事件深入浅出</a></p>
<p>DOM级别一共可以分为4个级别：DOM0级，DOM1级，DOM2级和 DOM3级，而DOM事件分为3个级别：DOM0级事件处理，DOM2级事件处理和DOM3级事件处理。如下图所示：</p>
<p> <img src="http://myphoto.shigaozhen.cn/myselfhexo/20180530/101425991.jpg" alt="mark"></p>
<p>有人可能会问，为什么没有DOM1级事件处理呢？因为1级DOM标准中并没有定义事件相关的内容，所以没有所谓的1级DOM事件模型。</p>
<p>关于DOM级别这里不做详细的介绍，下面主要介绍下不同级别DOM中的不同事件。</p>
<p><strong>1.DOM0级事件</strong></p>
<p>在了解DOM0级事件之前，我们有必要先了解下<strong>HTML事件处理程序</strong>，也是最早的这一种的事件处理方式，代码如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">onclick</span>=<span class="string">"showFn()"</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">showFn</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        alert(<span class="string">'Hello World'</span>);</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>以上代码我们通过直接在HTML代码里定义了一个onclick的属性触发showFn方法，这样的事件处理程序最大的缺点就是HTML于JS强耦合，我们一旦需要修改函数名就得修改两个地方。当然其优点是不需要操作DOM来完成事件的绑定。</p>
<p>那么什么是DOM0级处理事件呢？DOM0级事件就是将一个函数赋值给一个事件处理属性，比如：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn"</span> <span class="attr">type</span>=<span class="string">"button"</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">'btn'</span>);</span></span><br><span class="line"><span class="undefined">    </span></span><br><span class="line"><span class="javascript">    btn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        alert(<span class="string">'Hello World'</span>);</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">    </span></span><br><span class="line"><span class="javascript">    <span class="comment">// btn.onclick = null; 解绑事件 </span></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>以上代码我们给button定义了一个id，通过JS获取到了这个id的按钮，并将一个函数赋值给了一个事件处理属性onclick，这样的方法便是DOM0级处理事件的体现。我们可以通过给事件处理属性赋值null来解绑事件。</p>
<p>DOM0级事件处理程序的缺点在于一个处理程序无法同时绑定多个处理函数，比如我还想在按钮点击事件上加上另外一个函数。</p>
<p><strong>2.DOM2级事件</strong></p>
<p>DOM2级事件在DOM0级事件的基础上弥补了一个处理程序无法同时绑定多个处理函数的缺点，允许给一个处理程序添加多个处理函数。代码如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn"</span> <span class="attr">type</span>=<span class="string">"button"</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">'btn'</span>);</span></span><br><span class="line"><span class="undefined">    </span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">showFn</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        alert(<span class="string">'Hello World'</span>);</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">    </span></span><br><span class="line"><span class="javascript">    btn.addEventListener(<span class="string">'click'</span>, showFn, <span class="literal">false</span>);</span></span><br><span class="line"><span class="undefined">    </span></span><br><span class="line"><span class="javascript">    <span class="comment">// btn.removeEventListener('click', showFn, false); 解绑事件 </span></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>DOM2级事件定义了<strong>addEventListener和removeEventListener</strong>两个方法，分别用来绑定和解绑事件，方法中包含3个参数，分别是绑定的事件处理属性名称（不包含on）、处理函数和是否在捕获时执行事件处理函数。如果我们还需要添加一个鼠标移入的方法，只需要：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">btn.addEventListener(<span class="string">'mouseover'</span>, showFn, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>
<p>这样点击按钮和鼠标移入时都将触发showFn方法。</p>
<p>需要注意的是IE8级以下版本不支持addEventListener和removeEventListener，<strong>需要用attachEvent和detachEvent来实现：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">btn.attachEvent(<span class="string">'onclick'</span>, showFn); <span class="comment">// 绑定事件 </span></span><br><span class="line">btn.detachEvent(<span class="string">'onclick'</span>, showFn); <span class="comment">// 解绑事件</span></span><br></pre></td></tr></table></figure>
<p>这里我们不需要传入第三个参数，因为IE8级以下版本只支持冒泡型事件。</p>
<p><strong>3.DOM3级事件</strong></p>
<p>DOM3级事件在DOM2级事件的基础上添加了更多的事件类型，全部类型如下：</p>
<ol>
<li>UI事件，当用户与页面上的元素交互时触发，如：load、scroll</li>
<li>焦点事件，当元素获得或失去焦点时触发，如：blur、focus</li>
<li>鼠标事件，当用户通过鼠标在页面执行操作时触发如：dbclick、mouseup</li>
<li>滚轮事件，当使用鼠标滚轮或类似设备时触发，如：mousewheel</li>
<li>文本事件，当在文档中输入文本时触发，如：textInput</li>
<li>键盘事件，当用户通过键盘在页面上执行操作时触发，如：keydown、keypress</li>
<li>合成事件，当为IME（输入法编辑器）输入字符时触发，如：compositionstart</li>
<li>变动事件，当底层DOM结构发生变化时触发，如：DOMsubtreeModified</li>
</ol>
<p>同时DOM3级事件也允许使用者自定义一些事件。</p>
<h3 id="DOM事件流"><a href="#DOM事件流" class="headerlink" title="DOM事件流"></a>DOM事件流</h3><p>上文中讲到了addEventListener的第三个参数为指定事件是否在捕获阶段执行，设置为true表示事件在捕获阶段执行，而设置为false表示事件在冒泡阶段执行。那么什么是事件冒泡和事件捕获呢？可以用下图来解释：</p>
<p><img src="http://myphoto.shigaozhen.cn/myselfhexo/20180530/101036624.jpg" alt="mark"></p>
<p><strong>事件流（event propagation）：</strong></p>
<p>描述的是从页面中接收事件的顺序。IE的事件流是事件冒泡流（event bubbling），其他事件流是事件捕获流（event capturing）（由网景公司制定）。</p>
<p><strong>1、事件冒泡流：</strong>事件开始时由最具体的元素（文档中嵌套层次最深的那个节点）接收，然后，逐级向上传播到较为不具体的节点（文档）。所谓事件冒泡就是事件像泡泡一样从最开始生成的地方一层一层往上冒，比如上图中a标签为事件目标，点击a标签后同时也会触发p、li上的点击事件，一层一层向上直至最外层的html或document。下面是代码示例：  。所有现代浏览器都支持事件冒泡，故而，放心使用。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">"child"</span>&gt;</span>事件冒泡<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"> <span class="keyword">var</span> box = <span class="built_in">document</span>.getElementById(<span class="string">'box'</span>),</span></span><br><span class="line"><span class="javascript"> child = <span class="built_in">document</span>.getElementById(<span class="string">'child'</span>);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">child.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    alert(<span class="string">'我是目标事件'</span>);</span></span><br><span class="line"><span class="javascript"> &#125;, <span class="literal">false</span>);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript"> box.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    alert(<span class="string">'事件冒泡至DIV'</span>);</span></span><br><span class="line"><span class="javascript"> &#125;, <span class="literal">false</span>);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>上面的代码运行后我们点击a标签，首先会弹出’我是目标事件’提示，然后又会弹出’事件冒泡至DIV’的提示，这便说明了事件自内而外向上冒泡了。</p>
<p>那么我们如何<strong>阻止事件冒泡</strong>呢？这里就涉及事件的Event对象中的stopPropagation方法，如下：</p>
<figure class="highlight h"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">child.addEventListener('click', function(e) &#123;</span><br><span class="line">    alert('我是目标事件');</span><br><span class="line">    e.stopPropagation();</span><br><span class="line">&#125;, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>
<p>加上stopPropagation方法后，我们再次点击a标签就不会触发div上的click事件了</p>
<p><strong>事件捕获</strong></p>
<p>和事件冒泡相反，事件捕获是自上而下执行，我们只需要将addEventListener的第三个参数改为true就行。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">"child"</span>&gt;</span>事件冒泡<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"> <span class="keyword">var</span> box = <span class="built_in">document</span>.getElementById(<span class="string">'box'</span>),</span></span><br><span class="line"><span class="javascript"> child = <span class="built_in">document</span>.getElementById(<span class="string">'child'</span>);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript"> child.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">     alert(<span class="string">'我是目标事件'</span>);</span></span><br><span class="line"><span class="javascript"> &#125;, <span class="literal">true</span>);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript"> box.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    alert(<span class="string">'事件冒泡至DIV'</span>);</span></span><br><span class="line"><span class="javascript"> &#125;, <span class="literal">true</span>);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>此时我们点击a标签，首先弹出的是’事件冒泡至DIV’，其次弹出的是’我是目标事件’，正好与事件冒泡相反。</p>
<p>事件对象（event object）指的是与特定事件相关且包含该事件详细信息的对象。我们可以通过传递给事件处理程序的参数获取事件触发后所产生的一系列方法和属性。</p>
<h3 id="4-2-2Event对象"><a href="#4-2-2Event对象" class="headerlink" title="4.2.2Event对象"></a>4.2.2Event对象</h3><p>Event对象其实是一个<u>事件处理程序的参数</u>，当调用事件时，我们只需要将其传入事件函数就可以获取。代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function getEvent(event) &#123;</span><br><span class="line">    event = event || window.event;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面的事件函数传入了一个名叫Event的参数作为事件对象，同时做了浏览器兼容处理。在IE8及以前本版之中，通过设置属性注册事件处理程序时，调用的时候并未传递事件对象，需要通过全局对象window.event来获取。所以上述代码中我们利用 || 来做判断，如果event对象存在则使用event，不存在则使用window.event。</p>
<p>Event对象包含了几个方法和多个属性，通过这些方法和属性我们可以获取事件的详细信息并进行相关处理。</p>
<h3 id="Event对象方法"><a href="#Event对象方法" class="headerlink" title="Event对象方法"></a>Event对象方法</h3><p>Event对象主要有以下两个方法，用于处理事件的传播（冒泡、捕获）和事件的取消。</p>
<h3 id="1-stopPropagation"><a href="#1-stopPropagation" class="headerlink" title="1.stopPropagation"></a>1.stopPropagation</h3><p>stopPropagation方法主要用于阻止事件的进一步传播，比如阻止事件继续向上层冒泡。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getEvent</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">    event.stopPropagation();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">child.addEventListener(<span class="string">'click'</span>, getEvent, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>
<p>如果你需要兼容IE8及以下版本浏览器，则需要利用<strong>cancelBubble</strong>来代替stopPropagation，因为低版本IE不支持stopPropagation方法。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getEvent</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">    event = event || <span class="built_in">window</span>.event;</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">if</span> (event.stopPropagation) &#123;</span><br><span class="line">        event.stopPropagation();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        event.cancelBubble = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>cancelBubble是IE事件对象的一个属性，设置这个属性为true能阻止事件进一步传播。</p>
<h3 id="2-preventDefault"><a href="#2-preventDefault" class="headerlink" title="2.preventDefault"></a>2.preventDefault</h3><p>preventDefault方法用于取消事件的默认操作，比如a链接的跳转行为和表单自动提交行为就可以用preventDefault方法来取消。代码如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">"go"</span> <span class="attr">href</span>=<span class="string">"https://www.baidu.com/"</span>&gt;</span>禁止跳转<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> go = <span class="built_in">document</span>.getElementById(<span class="string">'go'</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">goFn</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">    event.preventDefault();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'我没有跳转！'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">go.addEventListener(<span class="string">'click'</span>, goFn, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>
<p>通过preventDefault，我们成功阻止了a链接的跳转行为。不过，在IE9之前的浏览器中需要设置returnValue属性为false来实现。如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">goFn</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">    event = event || <span class="built_in">window</span>.event;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (event.preventDefault) &#123;</span><br><span class="line">        event.preventDefault();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        event.returnValue = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'我没有跳转！'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>除了以上Event对象的两个主要方法，当前DOM事件规范草案在Event对象上还定义了另一个方法，命名为stopImmediatePropagation。</p>
<h3 id="3-stopImmediatePropagation"><a href="#3-stopImmediatePropagation" class="headerlink" title="3.stopImmediatePropagation"></a>3.stopImmediatePropagation</h3><p>和stopPropagation相比，stopImmediatePropagation同样可以阻止事件的传播，不同点在于其还可以把这个元素绑定的同类型事件也阻止了。如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> go = <span class="built_in">document</span>.getElementById(<span class="string">'go'</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">goFn</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">    event.preventDefault();</span><br><span class="line">    event.stopImmediatePropagation(); <span class="comment">// 阻止事件冒泡并阻止同类型事件</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'我没有跳转！'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">goFn2</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'我是同类型事件！'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">go.addEventListener(<span class="string">'click'</span>, goFn, <span class="literal">false</span>);</span><br><span class="line">go.addEventListener(<span class="string">'click'</span>, goFn2, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>
<p>我们在a链接上继续加了一个点击事件，如果我们在goFn方法中添加了stopImmediatePropagation方法，那么goFn2方法将不会被执行，同时也不会将点击事件冒泡至上层。</p>
<p>需要注意的是，stopImmediatePropagation目前一部分浏览器尚不支持，但是像jQuery这样的库封装了跨平台的stopImmediatePropagation方法。</p>
<h3 id="Event对象属性"><a href="#Event对象属性" class="headerlink" title="Event对象属性"></a>Event对象属性</h3><p>与Event对象的方法相比，因Event对象的属性相对较多，文本无法一一讲解，所以主要介绍实际项目中常用的Event对象属性。</p>
<h3 id="1-type属性"><a href="#1-type属性" class="headerlink" title="1.type属性"></a>1.type属性</h3><p>通过type我们可以获取事件发生的类型，比如点击事件我们获取的是’click’字符串。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> go = <span class="built_in">document</span>.getElementById(<span class="string">'go'</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">goFn</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(event.type); <span class="comment">// 输出'click'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">go.addEventListener(<span class="string">'click'</span>, goFn, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>
<h3 id="2-target属性"><a href="#2-target属性" class="headerlink" title="2.target属性"></a>2.target属性</h3><p>target属性主要用于获取事件的目标对象，比如我们点击a标签获取的是a标签的html对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> go = <span class="built_in">document</span>.getElementById(<span class="string">'go'</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">goFn</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> target = event.target;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">console</span>.log(target === go) <span class="comment">// 返回true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">go.addEventListener(<span class="string">'click'</span>, goFn, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>
<p>在IE8及之前版本，我们需要使用srcElement而非target。兼容方案如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function goFn(event) &#123;</span><br><span class="line">    var event = event || window.event,    </span><br><span class="line">        target = event.target || event.srcElement;</span><br><span class="line">    </span><br><span class="line">    console.log(target === go) // 返回true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-鼠标事件属性"><a href="#3-鼠标事件属性" class="headerlink" title="3. 鼠标事件属性"></a>3. 鼠标事件属性</h3><p>在用鼠标触发事件时，主要的事件属性包含鼠标的位置和按键的状态，比如：clientX和clientY指定了鼠标在窗口坐标中的位置，button和which指定了按下的鼠标键是哪个。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">moveFn</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(event.screenX) <span class="comment">// 获取鼠标基于屏幕的X轴坐标</span></span><br><span class="line">    <span class="built_in">console</span>.log(event.screenY) <span class="comment">// 获取鼠标基于屏幕的Y轴坐标</span></span><br><span class="line">    <span class="built_in">console</span>.log(event.clientX) <span class="comment">// 获取鼠标基于浏览器窗口的X轴坐标</span></span><br><span class="line">    <span class="built_in">console</span>.log(event.clientY) <span class="comment">// 获取鼠标基于浏览器窗口的Y轴坐标</span></span><br><span class="line">    <span class="built_in">console</span>.log(event.pageX) <span class="comment">// 获取鼠标基于文档的X轴坐标</span></span><br><span class="line">    <span class="built_in">console</span>.log(event.pageY) <span class="comment">// 获取鼠标基于文档的Y轴坐标</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clickFn</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(event.button) <span class="comment">// 获取鼠标按下的键。非IE浏览器中0为鼠标左键，1为鼠标中键，2为鼠标右键</span></span><br><span class="line">    <span class="built_in">console</span>.log(event.which) <span class="comment">// 获取指定事件上哪个键盘键或鼠标按钮被按下</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">'mouseover'</span>, moveFn, <span class="literal">false</span>);</span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">'click'</span>, clickFn, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>
<h3 id="4-键盘事件属性"><a href="#4-键盘事件属性" class="headerlink" title="4.键盘事件属性"></a>4.键盘事件属性</h3><p>在用键盘触发事件时，主要的事件属性包含键盘的按键keyCode和是否按下特殊键，比如：keyCode指定了按下键的键码值，ctrlKey指定是否按下了ctrl键。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">keyFn</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(event.keyCode); <span class="comment">// 获取按下键的键码值</span></span><br><span class="line">    <span class="built_in">console</span>.log(event.ctrlKey); <span class="comment">// 获取是否按下了ctrl键</span></span><br><span class="line">    <span class="built_in">console</span>.log(event.shiftKey); <span class="comment">// 获取是否按下了shift键</span></span><br><span class="line">    <span class="built_in">console</span>.log(event.altKey); <span class="comment">// 获取是否按下了alt键</span></span><br><span class="line">    <span class="built_in">console</span>.log(event.metaKey); <span class="comment">// 获取是否按下了meta键</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">'keyup'</span>, keyFn, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>
<h2 id="4-3-事件绑定"><a href="#4-3-事件绑定" class="headerlink" title="4.3 事件绑定"></a>4.3 事件绑定</h2><p>要想让 JavaScript 对用户的操作作出响应，首先要对 DOM 元素绑定事件处理函数。所谓事件处理函数，就是处理用户操作的函数，不同的操作对应不同的名称。</p>
<p>在JavaScript中，有三种常用的绑定事件的方法：</p>
<ul>
<li>在DOM元素中直接绑定；</li>
<li>在JavaScript代码中绑定；</li>
<li>绑定事件监听函数。</li>
</ul>
<p><strong>使用事件监听绑定事件</strong></p>
<p>绑定事件的另一种方法是用 addEventListener() 或 attachEvent() 来绑定事件监听函数。下面详细介绍，事件监听。</p>
<h3 id="事件监听（三个事件阶段）"><a href="#事件监听（三个事件阶段）" class="headerlink" title="事件监听（三个事件阶段）"></a>事件监听（三个事件阶段）</h3><p>关于事件监听，W3C规范中定义了3个事件阶段，依次是捕获阶段、目标阶段、冒泡阶段。</p>
<p>事件目标阶段(target phase)。事件到达目标元素, 触发目标元素的监听函数 。</p>
<h3 id="事件委托"><a href="#事件委托" class="headerlink" title="事件委托"></a>事件委托</h3><p>事件委托就是利用冒泡的原理，把事件加到父元素或祖先元素上，触发执行效果。</p>
<p>事件在冒泡过程中会上传到父节点，因此可以把子节点的监听函数定义在父节点上，由父节点的监听函数统一处理多个子元素的事件，这种方式称为事件代理(Event delegation)。</p>
<p>我们有一个div元素，它包含三个按钮:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"按钮"</span> <span class="attr">id</span>=<span class="string">"btn"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"按钮2"</span> <span class="attr">id</span>=<span class="string">"btn2"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"按钮3"</span> <span class="attr">id</span>=<span class="string">"btn3"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>我们可以在父节点上一次性的为所有子节点注册监听函数:</p>
<figure class="highlight h"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var box = document.getElementById('box');</span><br><span class="line"></span><br><span class="line">box.addEventListener('click', function(event) &#123;</span><br><span class="line">  if (event.target.tagName.toLowerCase() === 'input') &#123;</span><br><span class="line">    <span class="comment">// some code</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://myphoto.shigaozhen.cn/myselfhexo/20180530/111139590.jpg" alt="mark"></p>
<p>所有的事件都会走一遍这个流程。</p>
<p>如果点击了 (text) 那么在 div、body、……绑定的事件都会执行，除非有一个事件阻止了事件冒泡。</p>
<p>因此我们可以给父元素绑定一个事件，这样子元素的事件就会冒泡到父元素。</p>
<ul>
<li>对于非target节点则先执行捕获在执行冒泡</li>
<li>对于target节点则是先执行先注册的事件，无论冒泡还是捕获。</li>
</ul>
<p><strong>三个事件阶段的<a href="http://jsbin.com/exezex/4/edit?css,js,output" target="_blank" rel="noopener">demo</a>必看</strong>。</p>
<p><strong>事件句柄</strong></p>
<p>HTML 4.0 的新特性之一是有能力使 HTML 事件触发浏览器中的动作（action），比如当用户点击某个 HTML 元素时启动一段 JavaScript。下面是一个属性列表，这些属性可插入 HTML 标签来定义事件动作。</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>当以下情况发生时，出现此事件</th>
<th>FF</th>
<th>N</th>
<th>IE</th>
</tr>
</thead>
<tbody>
<tr>
<td>onabort</td>
<td>图像加载被中断</td>
<td>1</td>
<td>3</td>
<td>4</td>
</tr>
<tr>
<td>onblur</td>
<td>元素失去焦点</td>
<td>1</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>onchange</td>
<td>用户改变域的内容</td>
<td>1</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>onclick</td>
<td>鼠标点击某个对象</td>
<td>1</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>ondblclick</td>
<td>鼠标双击某个对象</td>
<td>1</td>
<td>4</td>
<td>4</td>
</tr>
<tr>
<td>onerror</td>
<td>当加载文档或图像时发生某个错误</td>
<td>1</td>
<td>3</td>
<td>4</td>
</tr>
<tr>
<td>onfocus</td>
<td>元素获得焦点</td>
<td>1</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>onkeydown</td>
<td>某个键盘的键被按下</td>
<td>1</td>
<td>4</td>
<td>3</td>
</tr>
<tr>
<td>onkeypress</td>
<td>某个键盘的键被按下或按住</td>
<td>1</td>
<td>4</td>
<td>3</td>
</tr>
<tr>
<td>onkeyup</td>
<td>某个键盘的键被松开</td>
<td>1</td>
<td>4</td>
<td>3</td>
</tr>
<tr>
<td>onload</td>
<td>某个页面或图像被完成加载</td>
<td>1</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>onmousedown</td>
<td>某个鼠标按键被按下</td>
<td>1</td>
<td>4</td>
<td>4</td>
</tr>
<tr>
<td>onmousemove</td>
<td>鼠标被移动</td>
<td>1</td>
<td>6</td>
<td>3</td>
</tr>
<tr>
<td>onmouseout</td>
<td>鼠标从某元素移开</td>
<td>1</td>
<td>4</td>
<td>4</td>
</tr>
<tr>
<td>onmouseover</td>
<td>鼠标被移到某元素之上</td>
<td>1</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>onmouseup</td>
<td>某个鼠标按键被松开</td>
<td>1</td>
<td>4</td>
<td>4</td>
</tr>
<tr>
<td>onreset</td>
<td>重置按钮被点击</td>
<td>1</td>
<td>3</td>
<td>4</td>
</tr>
<tr>
<td>onresize</td>
<td>窗口或框架被调整尺寸</td>
<td>1</td>
<td>4</td>
<td>4</td>
</tr>
<tr>
<td>onselect</td>
<td>文本被选定</td>
<td>1</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>onsubmit</td>
<td>提交按钮被点击</td>
<td>1</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>onunload</td>
<td>用户退出页面</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>

      
    </div>
    
    
    
    <div>
   
    <div>

        
-------------本文结束感谢您的阅读-------------

    
</div>
    
    </div>

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/读/" rel="tag"># 读</a>
          
            <a href="/tags/JavaScript/" rel="tag"># JavaScript</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/note/2018/undefined23/bc922f3.html" rel="next" title="《被嫌弃的松子的一生》中的松子要怎么做才能改变命运?">
                <i class="fa fa-chevron-left"></i> 《被嫌弃的松子的一生》中的松子要怎么做才能改变命运?
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
        
<script>
  with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='//bdimg.share.baidu.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5)];
</script>

      
    </div>
  </div>


          </div>
          


          

  
    <div id="gitalk-container"></div>  


  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
      <div id="sidebar-dimmer"></div>
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.png"
                alt="3039535188@qq.com" />
            
              <p class="site-author-name" itemprop="name">3039535188@qq.com</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">18</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">7</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/shigithup" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.douban.com/people/142813973/" target="_blank" title="豆瓣">
                      
                        <i class="fa fa-fw fa-coffee"></i>豆瓣</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://music.163.com/#/user/home?id=90908294" target="_blank" title="网易云音乐">
                      
                        <i class="fa fa-fw fa-music"></i>网易云音乐</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-DOM-节点"><span class="nav-text">1.DOM 节点</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-DOM-方法和属性"><span class="nav-text">2.DOM 方法和属性</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#nodeName-属性"><span class="nav-text">nodeName 属性</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#nodeValue-属性"><span class="nav-text">nodeValue 属性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#nodeType-属性"><span class="nav-text">nodeType 属性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DOM-对象方法"><span class="nav-text">DOM 对象方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改-HTML-元素"><span class="nav-text">修改 HTML 元素</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#实例"><span class="nav-text">实例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实例-1"><span class="nav-text">实例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实例-2"><span class="nav-text">实例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实例-3"><span class="nav-text">实例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#导航节点关系"><span class="nav-text">导航节点关系</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DOM-根节点"><span class="nav-text">DOM 根节点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#childNodes-和-nodeValue"><span class="nav-text">childNodes 和 nodeValue</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#实例-4"><span class="nav-text">实例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#childNodes属性"><span class="nav-text">childNodes属性:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#children属性"><span class="nav-text">children属性:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#firstChild属性："><span class="nav-text">firstChild属性：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#innerText-outerText-innerHTML-outerHTML"><span class="nav-text">innerText/outerText,innerHTML/outerHTML</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#element-innerHTML"><span class="nav-text">element.innerHTML</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#node-innerText"><span class="nav-text">node.innerText</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-HTML-DOM-实例"><span class="nav-text">3.HTML DOM 实例</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Document-对象"><span class="nav-text">Document 对象</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-事件"><span class="nav-text">4.事件</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#4-1概念："><span class="nav-text">4.1概念：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-2事件流"><span class="nav-text">4.2事件流</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-1DOM级别与DOM事件"><span class="nav-text">4.2.1DOM级别与DOM事件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DOM事件流"><span class="nav-text">DOM事件流</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-2Event对象"><span class="nav-text">4.2.2Event对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Event对象方法"><span class="nav-text">Event对象方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-stopPropagation"><span class="nav-text">1.stopPropagation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-preventDefault"><span class="nav-text">2.preventDefault</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-stopImmediatePropagation"><span class="nav-text">3.stopImmediatePropagation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Event对象属性"><span class="nav-text">Event对象属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-type属性"><span class="nav-text">1.type属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-target属性"><span class="nav-text">2.target属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-鼠标事件属性"><span class="nav-text">3. 鼠标事件属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-键盘事件属性"><span class="nav-text">4.键盘事件属性</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-3-事件绑定"><span class="nav-text">4.3 事件绑定</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#事件监听（三个事件阶段）"><span class="nav-text">事件监听（三个事件阶段）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#事件委托"><span class="nav-text">事件委托</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">3039535188@qq.com</span>

  
</div>








  <div class="footer-custom">豫ICP备18010326号</div>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  
  <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
  <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
   <script type="text/javascript">
        var gitalk = new Gitalk({
          clientID: '0cd15a19fbf292a3df3d',
          clientSecret: '94e8970c83d76609f9a1d3ac28a377af4a941bf2',
          repo: 'shigithup.github.io',
          owner: 'shigithup',
          admin: ['shigithup'],
          id: location.pathname,
          distractionFreeMode: 'true'
        })
        gitalk.render('gitalk-container')           
       </script>






  




	





  





  













  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("DnTq8pUq5NmYnvPkWfvFf23I-gzGzoHsz", "8V4ErWsnUWnHm7rh6suDGUML");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  
  

  

  

  

</body>
</html>
<!-- 页面点击小红心 --> <script type="text/javascript" src="/js/src/love.js"></script>
